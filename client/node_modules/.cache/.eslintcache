[{"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/index.js":"1","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/App.js":"2","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/store/index.js":"3","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/index.js":"4","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/store/vacations.js":"5","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/store/user.js":"6","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/LoginPage.js":"7","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/RegisterPage.js":"8","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/HomePage.js":"9","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/index.js":"10","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/Vacation/index.js":"11","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/Vacation/VacationList.js":"12","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/Vacation/Vacation.js":"13"},{"size":396,"mtime":1617470332040,"results":"14","hashOfConfig":"15"},{"size":1298,"mtime":1617357932000,"results":"16","hashOfConfig":"15"},{"size":474,"mtime":1615988613000,"results":"17","hashOfConfig":"15"},{"size":162,"mtime":1615989193000,"results":"18","hashOfConfig":"15"},{"size":579,"mtime":1617358711000,"results":"19","hashOfConfig":"15"},{"size":244,"mtime":1615988830000,"results":"20","hashOfConfig":"15"},{"size":1187,"mtime":1617637501442,"results":"21","hashOfConfig":"15"},{"size":1437,"mtime":1617470499723,"results":"22","hashOfConfig":"15"},{"size":2549,"mtime":1617359556000,"results":"23","hashOfConfig":"15"},{"size":89,"mtime":1617359254000,"results":"24","hashOfConfig":"15"},{"size":114,"mtime":1617359060000,"results":"25","hashOfConfig":"15"},{"size":1828,"mtime":1617359613000,"results":"26","hashOfConfig":"15"},{"size":853,"mtime":1617469605021,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"13zr8ws",{"filePath":"31","messages":"32","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"30"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"30"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"30"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"30"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"30"},"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/index.js",[],["61","62"],"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/App.js",["63","64"],"// id firstName lastName userName password role\n\nimport { useState } from 'react';\n\nimport { Switch, Route, useHistory, Redirect } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { LoginPage, RegisterPage, HomePage } from './pages';\nimport { Actions, Selectors } from './store';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport './App.css';\n\nfunction App() {\n\tconst dispatch = useDispatch();\n\n\tconst [loading, setLoading] = useState(true);\n\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tasync function getUser() {\n\t\t\tconst res = await fetch('/api/auth/current');\n\t\t\tconst body = await res.json();\n\t\t\tif (res.ok) {\n\t\t\t\t// user exists\n\t\t\t\tdispatch(Actions.user.set(body));\n\t\t\t}\n\t\t\tsetLoading(false);\n\t\t}\n\n\t\tgetUser();\n\t}, []);\n\n\tif (loading) return <div>loading....</div>;\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<main>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t\t<Auth>\n\t\t\t\t\t\t\t<HomePage />\n\t\t\t\t\t\t</Auth>\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/login\">\n\t\t\t\t\t\t<LoginPage />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route exact path=\"/regiser\">\n\t\t\t\t\t\t<RegisterPage />\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</main>\n\t\t</div>\n\t);\n}\n\nfunction Auth({ children }) {\n\tconst user = useSelector(Selectors.user);\n\tif (!user) return <Redirect to=\"/login\" />;\n\treturn children;\n}\n\nexport default App;\n","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/store/index.js",["65"],"import { configureStore, createSlice } from '@reduxjs/toolkit';\n\nimport userSlice from './user';\nimport vacationsSlice from './vacations';\n\nexport const Actions = {\n\tuser: userSlice.actions,\n\tvacations: vacationsSlice.actions,\n};\n\nexport const Selectors = {\n\tuser: state => state.user?.data,\n\tvacations: state => state.vacations?.data,\n};\n\nconst store = configureStore({\n\treducer: {\n\t\tuser: userSlice.reducer,\n\t\tvacations: vacationsSlice.reducer,\n\t},\n});\n\nexport { store };\n","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/index.js",[],"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/store/vacations.js",[],"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/store/user.js",[],"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/LoginPage.js",["66","67","68","69","70"],"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/RegisterPage.js",["71"],"import { useState } from 'react';\n\nimport { useHistory } from 'react-router-dom';\n\n\nconst field = ['firstName', 'lastName', 'userName', 'password'];\n\n\nfunction RegisterPage() {\n\tconst [form, setForm] = useState({});\n\tconst [serverError, setServerError] = useState('');\n\n\tconst history = useHistory();\n\n\tconst onSubmit = async event => {\n\t\ttry {\n\t\t\tevent.preventDefault();\n\t\t\t// todo: validate\n\t\t\tconst res = await fetch('/api/regiser', {\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: JSON.stringify(form),\n\t\t\t});\n\n\t\t\tconst body = await res.json();\n\t\t\tif (!res.ok) {\n\t\t\t\treturn setServerError(body.message);\n\t\t\t}\n\t\t\thistory.push('/login');\n\n\t\t} catch (err) { }\n\t};\n\tconst onChange = event => {\n\t\tconst { name, value } = event.target;\n\t\tsetForm({ ...form, [name]: value });\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<form className=\"registerForm\" onChange={onChange} onSubmit={onSubmit}>\n\t\t\t\t<label htmlFor=\"firstName\">firstName</label>\n\t\t\t\t<input type=\"text\" name=\"firstName\" />\n\t\t\t\t<label htmlFor=\"lastName\">lastName</label>\n\t\t\t\t<input type=\"text\" name=\"lastName\" />\n\t\t\t\t<label htmlFor=\"userName\">userName</label>\n\t\t\t\t<input type=\"text\" name=\"userName\" />\n\t\t\t\t<label htmlFor=\"password\">password</label>\n\t\t\t\t<input type=\"password\" name=\"password\" />\n\t\t\t\t<button>regiser</button>\n\t\t\t\t{!!serverError && <div className=\"error\">{serverError}</div>}\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default RegisterPage;\n","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/HomePage.js",["72","73","74"],"import { useState, useEffect } from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { useHistory } from 'react-router-dom';\n\nimport { Actions, Selectors } from '../store';\n\nimport { Vacation, VacationList } from '../components/';\n\n// modal\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\n\nconst fields = [\n\t{\n\t\tname: 'description',\n\t},\n\t{\n\t\tname: 'destination',\n\t},\n\t{\n\t\tname: 'price',\n\t\ttype: 'number',\n\t},\n\t{\n\t\tname: 'startDate',\n\t\ttype: 'date',\n\t},\n\t{\n\t\tname: 'endDate',\n\t\ttype: 'date',\n\t},\n\t{\n\t\tname: 'image',\n\t\ttype: 'file',\n\t},\n];\n\nfunction getFormData(object) {\n\tconst form_data = new FormData();\n\n\tfor (const key in object) {\n\t\tconsole.log('ss', key, object[key]);\n\t\tform_data.append(key, object[key]);\n\t}\n\n\treturn form_data;\n}\n\nfunction HomePage() {\n\tconst user = useSelector(Selectors.user);\n\tconst isAdmin = user?.role === 1;\n\tconst vacations = useSelector(Selectors.vacations);\n\n\tconst dispatch = useDispatch();\n\n\tconst [open, setOpen] = useState(false);\n\tconst [form, setForm] = useState({});\n\n\tconst onOpenModal = () => setOpen(true);\n\tconst onCloseModal = () => setOpen(false);\n\n\tconst onSubmit = async event => {\n\t\tevent.preventDefault();\n\t\tconsole.log('form', form);\n\n\t\tconst res = await fetch('/api/vacations', {\n\t\t\tmethod: 'POST',\n\t\t\tbody: getFormData(form),\n\t\t});\n\n\t\tconst body = await res.json();\n\t\tdispatch(Actions.vacations.add(body));\n\n\t\tonCloseModal();\n\t};\n\tconst onChange = event => {\n\t\tconst { name, value, files, type } = event.target;\n\n\t\tlet val = type === 'file' ? files[0] : value;\n\t\tconsole.log(name, val);\n\t\tsetForm({ ...form, [name]: val });\n\t};\n\n\tuseEffect(() => {\n\t\tasync function getVacations() {\n\t\t\tconst res = await fetch('/api/vacations');\n\t\t\tconst body = await res.json();\n\t\t\tdispatch(Actions.vacations.set(body));\n\t\t}\n\t\tgetVacations();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"Home\">\n\t\t\t<div className=\"header\">Hello : {user?.firstName}</div>\n\t\t\t{isAdmin && (\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={onOpenModal}>Add Vacation</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<VacationList user={user} vacations={vacations} />\n\n\t\t\t<Modal open={open} onClose={onCloseModal} center>\n\t\t\t\t<h2>Add Vacation</h2>\n\t\t\t\t<form onChange={onChange} onSubmit={onSubmit}>\n\t\t\t\t\t{fields.map(field => {\n\t\t\t\t\t\tconst { name, type = 'text' } = field;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label htmlFor={name}>{name}</label>\n\t\t\t\t\t\t\t\t<input type={type} name={name} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button>Add</button>\n\t\t\t\t</form>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n}\n\nexport default HomePage;\n","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/index.js",[],"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/Vacation/index.js",[],"/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/Vacation/VacationList.js",["75","76","77","78","79","80"],"import { Vacation } from './';\n\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { useHistory } from 'react-router-dom';\n\nimport { Actions, Selectors } from '../../store';\n\nfunction VacationList(props) {\n\tconst { vacations, user } = props;\n\tconst isAdmin = user?.role === 1;\n\n   const dispatch = useDispatch();\n\n\tconst sortByFollow = (a, b) => {\n\t\tif (a.isFollow) return -1;\n\t\treturn 1;\n\t};\n\n\tconst deleteVacation = async vacationId => {\n\t\tconst res = await fetch(`/api/vacations/${vacationId}`, {\n\t\t\tmethod: 'DELETE',\n\t\t});\n\n\t\tdispatch(Actions.vacations.delete(vacationId));\n\t};\n\n\tconst toggleFollow = async vacationId => {\n\t\tconsole.log('toggleFollow', vacationId);\n\n\t\tconst isFollow = !!vacations.find(v => v.id === vacationId).isFollow;\n\t\tif (isFollow) {\n\t\t\tconst res = await fetch('/api/vacations/follow', {\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tvacationId: vacationId,\n\t\t\t\t}),\n\t\t\t});\n\t\t\tconst body = await res.json();\n\t\t} else {\n\t\t\tconst res = await fetch('/api/vacations/follow', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tvacationId: vacationId,\n\t\t\t\t}),\n\t\t\t});\n\t\t\tconst body = await res.json();\n\t\t}\n\t\tdispatch(Actions.vacations.toggleFollow(vacationId));\n\t};\n\n\treturn (\n\t\t<div className=\"vacations\">\n\t\t\t{[...vacations].sort(sortByFollow).map(vacation => {\n\t\t\t\tconst isFollow = !!vacation.isFollow;\n\n\t\t\t\tconst actions = isAdmin\n\t\t\t\t\t? [<span>edit</span>, <span onClick={() => deleteVacation(vacation.id)}>delete</span>]\n\t\t\t\t\t: [<span onClick={() => toggleFollow(vacation.id)}>{isFollow ? 'UnFollow' : 'Follow'}</span>];\n\t\t\t\treturn <Vacation key={vacation.id} vacation={vacation} actions={actions} />;\n\t\t\t})}\n\t\t</div>\n\t);\n}\n\nexport default VacationList;\n","/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/components/Vacation/Vacation.js",["81","82","83","84"],"import { Card, Avatar } from 'antd';\nimport { EditOutlined, EllipsisOutlined, SettingOutlined } from '@ant-design/icons';\nimport './card.css';\nimport { format } from 'date-fns';\n\n// [<SettingOutlined key=\"setting\" />, <EditOutlined key=\"edit\" />, <EllipsisOutlined key=\"ellipsis\" />]\n\nconst { Meta } = Card;\n\nfunction Vacation(props) {\n\tconst { vacation, actions } = props;\n\n\treturn (\n\t\t<div className=\"card\">\n\t\t\t<Card\n\t\t\t\tstyle={{ width: 300}}\n\t\t\t\tcover={<img alt=\"example\" src={`http://localhost:5000/${vacation.image}`} />}\n\t\t\t\tactions={actions}>\n\t\t\t\t<Meta title={vacation.destination} description={vacation.description} />\n\t\t\t\t<p>price: {vacation.price}</p>\n\t\t\t\t<p>start: {format(new Date(vacation.startDate), 'MM/dd/yyyy')}</p>\n\t\t\t\t<p>end: {format(new Date(vacation.endDate), 'MM/dd/yyyy')}</p>\n\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n\nexport default Vacation;\n",{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","severity":1,"message":"90","line":18,"column":8,"nodeType":"91","messageId":"92","endLine":18,"endColumn":15},{"ruleId":"93","severity":1,"message":"94","line":32,"column":5,"nodeType":"95","endLine":32,"endColumn":7,"suggestions":"96"},{"ruleId":"89","severity":1,"message":"97","line":1,"column":26,"nodeType":"91","messageId":"92","endLine":1,"endColumn":37},{"ruleId":"89","severity":1,"message":"98","line":10,"column":10,"nodeType":"91","messageId":"92","endLine":10,"endColumn":14},{"ruleId":"89","severity":1,"message":"99","line":10,"column":16,"nodeType":"91","messageId":"92","endLine":10,"endColumn":21},{"ruleId":"89","severity":1,"message":"100","line":10,"column":23,"nodeType":"91","messageId":"92","endLine":10,"endColumn":29},{"ruleId":"89","severity":1,"message":"101","line":11,"column":10,"nodeType":"91","messageId":"92","endLine":11,"endColumn":22},{"ruleId":"89","severity":1,"message":"102","line":11,"column":24,"nodeType":"91","messageId":"92","endLine":11,"endColumn":36},{"ruleId":"89","severity":1,"message":"103","line":6,"column":7,"nodeType":"91","messageId":"92","endLine":6,"endColumn":12},{"ruleId":"89","severity":1,"message":"104","line":5,"column":10,"nodeType":"91","messageId":"92","endLine":5,"endColumn":20},{"ruleId":"89","severity":1,"message":"105","line":9,"column":10,"nodeType":"91","messageId":"92","endLine":9,"endColumn":18},{"ruleId":"93","severity":1,"message":"94","line":93,"column":5,"nodeType":"95","endLine":93,"endColumn":7,"suggestions":"106"},{"ruleId":"89","severity":1,"message":"107","line":3,"column":23,"nodeType":"91","messageId":"92","endLine":3,"endColumn":34},{"ruleId":"89","severity":1,"message":"104","line":5,"column":10,"nodeType":"91","messageId":"92","endLine":5,"endColumn":20},{"ruleId":"89","severity":1,"message":"108","line":7,"column":19,"nodeType":"91","messageId":"92","endLine":7,"endColumn":28},{"ruleId":"89","severity":1,"message":"109","line":21,"column":9,"nodeType":"91","messageId":"92","endLine":21,"endColumn":12},{"ruleId":"89","severity":1,"message":"110","line":42,"column":10,"nodeType":"91","messageId":"92","endLine":42,"endColumn":14},{"ruleId":"89","severity":1,"message":"110","line":53,"column":10,"nodeType":"91","messageId":"92","endLine":53,"endColumn":14},{"ruleId":"89","severity":1,"message":"111","line":1,"column":16,"nodeType":"91","messageId":"92","endLine":1,"endColumn":22},{"ruleId":"89","severity":1,"message":"112","line":2,"column":10,"nodeType":"91","messageId":"92","endLine":2,"endColumn":22},{"ruleId":"89","severity":1,"message":"113","line":2,"column":24,"nodeType":"91","messageId":"92","endLine":2,"endColumn":40},{"ruleId":"89","severity":1,"message":"114","line":2,"column":42,"nodeType":"91","messageId":"92","endLine":2,"endColumn":57},"no-native-reassign",["115"],"no-negated-in-lhs",["116"],"no-unused-vars","'history' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["117"],"'createSlice' is defined but never used.","'Form' is defined but never used.","'Input' is defined but never used.","'Button' is defined but never used.","'UserOutlined' is defined but never used.","'LockOutlined' is defined but never used.","'field' is assigned a value but never used.","'useHistory' is defined but never used.","'Vacation' is defined but never used.",["118"],"'useSelector' is defined but never used.","'Selectors' is defined but never used.","'res' is assigned a value but never used.","'body' is assigned a value but never used.","'Avatar' is defined but never used.","'EditOutlined' is defined but never used.","'EllipsisOutlined' is defined but never used.","'SettingOutlined' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"119","fix":"120"},{"desc":"119","fix":"121"},"Update the dependencies array to be: [dispatch]",{"range":"122","text":"123"},{"range":"124","text":"123"},[761,763],"[dispatch]",[1852,1854]]