{"ast":null,"code":"var _jsxFileName = \"/Users/ofirshlomo/Desktop/\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD/vacationProject/client/src/pages/HomePage.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Actions, Selectors } from '../store';\nimport { Vacation, VacationList } from '../components/'; // modal\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fields = [{\n  name: 'description'\n}, {\n  name: 'destination'\n}, {\n  name: 'price',\n  type: 'number'\n}, {\n  name: 'startDate',\n  type: 'date'\n}, {\n  name: 'endDate',\n  type: 'date'\n}, {\n  name: 'image',\n  type: 'file'\n}];\n\nfunction getFormData(object) {\n  const form_data = new FormData();\n\n  for (const key in object) {\n    console.log('ss', key, object[key]);\n    form_data.append(key, object[key]);\n  }\n\n  return form_data;\n}\n\nfunction HomePage() {\n  _s();\n\n  const user = useSelector(Selectors.user);\n  const isAdmin = (user === null || user === void 0 ? void 0 : user.role) === 1;\n  const vacations = useSelector(Selectors.vacations);\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n  const [form, setForm] = useState({});\n\n  const onOpenModal = () => setOpen(true);\n\n  const onCloseModal = () => setOpen(false);\n\n  const onSubmit = async event => {\n    event.preventDefault();\n    console.log('form', form);\n    const res = await fetch('/api/vacations', {\n      method: 'POST',\n      body: getFormData(form)\n    });\n    const body = await res.json();\n    dispatch(Actions.vacations.add(body));\n    onCloseModal();\n  };\n\n  const onChange = event => {\n    const {\n      name,\n      value,\n      files,\n      type\n    } = event.target;\n    let val = type === 'file' ? files[0] : value;\n    console.log(name, val);\n    setForm({ ...form,\n      [name]: val\n    });\n  };\n\n  useEffect(() => {\n    async function getVacations() {\n      const res = await fetch('/api/vacations');\n      const body = await res.json();\n      dispatch(Actions.vacations.set(body));\n    }\n\n    getVacations();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Home\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [\"Hello : \", user === null || user === void 0 ? void 0 : user.firstName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onOpenModal,\n        children: \"Add Vacation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(VacationList, {\n      user: user,\n      vacations: vacations\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: onCloseModal,\n      center: true,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add Vacation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onChange: onChange,\n        onSubmit: onSubmit,\n        children: [fields.map(field => {\n          const {\n            name,\n            type = 'text'\n          } = field;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: name,\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: type,\n              name: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 8\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 3\n  }, this);\n}\n\n_s(HomePage, \"QTSQ8xYU3XjyI1u3Laj0RAuySXI=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"sources":["/Users/ofirshlomo/Desktop/לימודים/vacationProject/client/src/pages/HomePage.js"],"names":["useState","useEffect","useDispatch","useSelector","useHistory","Actions","Selectors","Vacation","VacationList","Modal","fields","name","type","getFormData","object","form_data","FormData","key","console","log","append","HomePage","user","isAdmin","role","vacations","dispatch","open","setOpen","form","setForm","onOpenModal","onCloseModal","onSubmit","event","preventDefault","res","fetch","method","body","json","add","onChange","value","files","target","val","getVacations","set","firstName","map","field"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { useHistory } from 'react-router-dom';\n\nimport { Actions, Selectors } from '../store';\n\nimport { Vacation, VacationList } from '../components/';\n\n// modal\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\n\nconst fields = [\n\t{\n\t\tname: 'description',\n\t},\n\t{\n\t\tname: 'destination',\n\t},\n\t{\n\t\tname: 'price',\n\t\ttype: 'number',\n\t},\n\t{\n\t\tname: 'startDate',\n\t\ttype: 'date',\n\t},\n\t{\n\t\tname: 'endDate',\n\t\ttype: 'date',\n\t},\n\t{\n\t\tname: 'image',\n\t\ttype: 'file',\n\t},\n];\n\nfunction getFormData(object) {\n\tconst form_data = new FormData();\n\n\tfor (const key in object) {\n\t\tconsole.log('ss', key, object[key]);\n\t\tform_data.append(key, object[key]);\n\t}\n\n\treturn form_data;\n}\n\nfunction HomePage() {\n\tconst user = useSelector(Selectors.user);\n\tconst isAdmin = user?.role === 1;\n\tconst vacations = useSelector(Selectors.vacations);\n\n\tconst dispatch = useDispatch();\n\n\tconst [open, setOpen] = useState(false);\n\tconst [form, setForm] = useState({});\n\n\tconst onOpenModal = () => setOpen(true);\n\tconst onCloseModal = () => setOpen(false);\n\n\tconst onSubmit = async event => {\n\t\tevent.preventDefault();\n\t\tconsole.log('form', form);\n\n\t\tconst res = await fetch('/api/vacations', {\n\t\t\tmethod: 'POST',\n\t\t\tbody: getFormData(form),\n\t\t});\n\n\t\tconst body = await res.json();\n\t\tdispatch(Actions.vacations.add(body));\n\n\t\tonCloseModal();\n\t};\n\tconst onChange = event => {\n\t\tconst { name, value, files, type } = event.target;\n\n\t\tlet val = type === 'file' ? files[0] : value;\n\t\tconsole.log(name, val);\n\t\tsetForm({ ...form, [name]: val });\n\t};\n\n\tuseEffect(() => {\n\t\tasync function getVacations() {\n\t\t\tconst res = await fetch('/api/vacations');\n\t\t\tconst body = await res.json();\n\t\t\tdispatch(Actions.vacations.set(body));\n\t\t}\n\t\tgetVacations();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"Home\">\n\t\t\t<div className=\"header\">Hello : {user?.firstName}</div>\n\t\t\t{isAdmin && (\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={onOpenModal}>Add Vacation</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<VacationList user={user} vacations={vacations} />\n\n\t\t\t<Modal open={open} onClose={onCloseModal} center>\n\t\t\t\t<h2>Add Vacation</h2>\n\t\t\t\t<form onChange={onChange} onSubmit={onSubmit}>\n\t\t\t\t\t{fields.map(field => {\n\t\t\t\t\t\tconst { name, type = 'text' } = field;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label htmlFor={name}>{name}</label>\n\t\t\t\t\t\t\t\t<input type={type} name={name} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button>Add</button>\n\t\t\t\t</form>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n}\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}